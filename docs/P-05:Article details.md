### 詳細設計　(イベント処理)　 P-05: Article dtails

## 開発メモ

app/Http/Controllers/PostController.php
show メソッド：引数 $id を受け取り、findOrFail でモデルを取得。Viewへ渡す。
destroy メソッド：Gate::authorize('delete', $post) で本人確認後、削除を実行。
resources/views/posts/show.blade.php
記事全文を表示。
@auth かつ @if(Auth::id() === $post->user_id) の時のみ「編集」「削除」ボタンを表示する。
app/Policies/PostPolicy.php
delete メソッド：$user->id === $post->user_id を返却。

1. 画面概要
   選択された記事の全文を閲覧する画面です。投稿者本人には編集・削除アクションを提供します。
   | 項目 | 内容 |
   | :------ | :------------------------------------------------------------ |
   | 画面名 | 記事詳細 |
   | パス（URL） | /posts/{id} |
   | アクセス権限 | 制限なし（ゲスト・ログイン済みユーザーともに閲覧可能。ただし編集・削除は投稿者本人のみ実行可能） |
   | 主な構成要素 | 記事タイトル、投稿者名、投稿日時、本文全文、戻るボタン、編集ボタン（投稿者本人のみ表示）、削除ボタン（投稿者本人のみ表示） |

2. イベント処理詳細 (Event Handling)

| 発生タイミング | アクション（Laravel 実装） | HTTP メソッド | ルート名      | 処理内容詳細                                                                                                       | 遷移先     |
| :------------- | :------------------------- | :------------ | :------------ | :----------------------------------------------------------------------------------------------------------------- | :--------- |
| 画面表示時     | PostController@show        | GET           | posts.show    | 1. URL パラメータの ID を基に記事を 1 件取得する（L-01）。<br>2. 該当記事が存在しない場合は 404 エラーを返却する。 | 自画面     |
| 編集ボタン押下 | リンククリック             | GET           | posts.edit    | 1. 記事 ID をパラメータとして保持し、編集フォーム画面へ遷移する。                                                  | P-07：編集 |
| 削除ボタン押下 | PostController@destroy     | DELETE        | posts.destroy | 1. 確認ダイアログ表示後、削除処理を実行する（L-02）。                                                              | P-04：DB   |

3. ロジック処理詳細 (Logic Processing)

| 処理 ID | 処理名                 | 実装内容詳細                                                                                                                              | 関連テーブル |
| :------ | :--------------------- | :---------------------------------------------------------------------------------------------------------------------------------------- | :----------- |
| L-01    | 詳細データ取得         | Post::with('user')->findOrFail($id) を実行し、投稿者情報を含めた記事データを取得する。該当データが存在しない場合は 404 例外をスローする。 | posts, users |
| L-02    | 認可（Policy）チェック | Gate または Policy を使用し、ログインユーザー ID と記事の user_id が一致するかを検証する。一致しない場合は 403 エラーを返却する。         | posts        |
